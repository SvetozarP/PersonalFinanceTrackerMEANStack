@use '../../../../../styles/shared.scss' as *;

.category-form-container {
  padding: 24px;
  background-color: $light-color;
  min-height: 100vh;

  // Header Section
  .header-section {
    @include flex-between;
    margin-bottom: 32px;
    padding: 24px;
    @include card-style;

    .title-section {
      h1 {
        margin: 0 0 8px 0;
        font-size: 28px;
        font-weight: 700;
        color: $dark-color;
      }

      .subtitle {
        margin: 0;
        color: $secondary-color;
        font-size: 16px;
      }
    }

    .actions-section .btn-secondary {
      @extend .btn-secondary;
    }
  }

  // Category Form
  .category-form {
    @include card-style;

    .form-sections .form-section {
      margin-bottom: 40px;
      padding-bottom: 32px;
      border-bottom: 1px solid #e9ecef;

      &:last-child {
        border-bottom: none;
        margin-bottom: 0;
        padding-bottom: 0;
      }

      .section-title {
        @include flex-center;
        margin: 0 0 24px 0;
        font-size: 20px;
        font-weight: 600;
        color: $dark-color;
        justify-content: flex-start;

        i {
          margin-right: 12px;
          color: $primary-color;
          font-size: 18px;
        }
      }

      .form-row {
        @include responsive-grid(300px);
      }

      // Color Picker
      .color-picker {
        @include flex-center;
        gap: 16px;
        margin-bottom: 16px;
        justify-content: flex-start;

        .color-preview {
          width: 60px;
          height: 60px;
          border-radius: $border-radius-lg;
          @include flex-center;
          border: 3px solid #e9ecef;
          transition: $transition;

          &:hover {
            transform: scale(1.05);
            box-shadow: $box-shadow-lg;
          }

          .preview-icon {
            font-size: 24px;
            filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
            font-family: 'Segoe UI Emoji', 'Apple Color Emoji', 'Noto Color Emoji', 'Android Emoji', 'EmojiSymbols', 'EmojiOne Mozilla', 'Twemoji Mozilla', 'Segoe UI Symbol', Arial, sans-serif;
          }
        }

        .color-input {
          width: 60px;
          height: 60px;
          border: none;
          border-radius: $border-radius;
          cursor: pointer;
          padding: 0;
          background: none;

          &::-webkit-color-swatch-wrapper {
            padding: 0;
            border-radius: $border-radius;
          }

          &::-webkit-color-swatch {
            border: none;
            border-radius: $border-radius;
          }
        }
      }

      .color-options {
        .color-option-label {
          font-weight: 600;
          color: #495057;
          margin-bottom: 12px;
          font-size: 14px;
        }

        .color-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(32px, 1fr));
          gap: 8px;
          max-width: 320px;

          .color-option {
            width: 32px;
            height: 32px;
            border: 2px solid #e9ecef;
            border-radius: $border-radius-sm;
            cursor: pointer;
            transition: $transition;
            position: relative;

            &:hover {
              transform: scale(1.1);
              box-shadow: $box-shadow;
            }

            &.selected {
              border-color: $dark-color;
              transform: scale(1.1);
              box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.3);

              &::after {
                content: 'âœ“';
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                color: white;
                font-weight: bold;
                font-size: 14px;
                text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
              }
            }
          }
        }
      }

      // Icon Picker
      .icon-picker {
        .icon-preview {
          width: 60px;
          height: 60px;
          border-radius: $border-radius-lg;
          @include flex-center;
          border: 3px solid #e9ecef;
          margin-bottom: 16px;
          transition: $transition;

          &:hover {
            transform: scale(1.05);
            box-shadow: $box-shadow-lg;
          }

          .preview-icon {
            font-size: 24px;
            filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
            font-family: 'Segoe UI Emoji', 'Apple Color Emoji', 'Noto Color Emoji', 'Android Emoji', 'EmojiSymbols', 'EmojiOne Mozilla', 'Twemoji Mozilla', 'Segoe UI Symbol', Arial, sans-serif;
          }
        }

        .icon-options {
          .icon-option-label {
            font-weight: 600;
            color: #495057;
            margin-bottom: 12px;
            font-size: 14px;
          }

          .icon-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
            gap: 8px;
            max-width: 400px;

            .icon-option {
              width: 40px;
              height: 40px;
              border: 2px solid #e9ecef;
              border-radius: $border-radius;
              background: white;
              cursor: pointer;
              @include flex-center;
              font-size: 18px;
              transition: $transition;
              position: relative;
              font-family: 'Segoe UI Emoji', 'Apple Color Emoji', 'Noto Color Emoji', 'Android Emoji', 'EmojiSymbols', 'EmojiOne Mozilla', 'Twemoji Mozilla', 'Segoe UI Symbol', Arial, sans-serif;

              // Custom tooltip styling
              &:hover::after {
                content: attr(title);
                position: absolute;
                bottom: 100%;
                left: 50%;
                transform: translateX(-50%);
                background: rgba(0, 0, 0, 0.9);
                color: white;
                padding: 6px 10px;
                border-radius: $border-radius-sm;
                font-size: 12px;
                white-space: nowrap;
                z-index: 1000;
                margin-bottom: 8px;
                pointer-events: none;
                opacity: 0;
                animation: tooltipFadeIn 0.2s ease-in-out forwards;
                box-shadow: $box-shadow;
              }

              &:hover {
                border-color: $primary-color;
                background-color: $light-color;
                transform: scale(1.1);
              }

              &.selected {
                border-color: $primary-color;
                background-color: $primary-color;
                color: white;
                transform: scale(1.1);
                box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.3);
              }
            }
          }
        }
      }

      // Checkbox Styling
      .checkbox-label {
        @include flex-center;
        cursor: pointer;
        font-weight: 500;
        color: #495057;
        user-select: none;
        justify-content: flex-start;

        .form-checkbox {
          position: absolute;
          opacity: 0;
          cursor: pointer;
          height: 0;
          width: 0;
        }

        .checkmark {
          height: 20px;
          width: 20px;
          background-color: white;
          border: 2px solid #e9ecef;
          border-radius: $border-radius-sm;
          margin-right: 12px;
          position: relative;
          transition: $transition;

          &:after {
            content: '';
            position: absolute;
            display: none;
            left: 6px;
            top: 2px;
            width: 4px;
            height: 8px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
          }
        }

        .form-checkbox:checked ~ .checkmark {
          background-color: $primary-color;
          border-color: $primary-color;

          &:after { display: block; }
        }

        .form-checkbox:focus ~ .checkmark {
          box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
      }

      // Preview Section
      .preview-container .category-preview {
        border-radius: $border-radius-lg;
        padding: 20px;
        @include flex-between;
        box-shadow: $box-shadow;
        transition: $transition;

        &:hover {
          transform: translateY(-2px);
          box-shadow: $box-shadow-xl;
        }

        .preview-content {
          @include flex-center;
          gap: 16px;
          justify-content: flex-start;

          .preview-icon {
            font-size: 32px;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
            font-family: 'Segoe UI Emoji', 'Apple Color Emoji', 'Noto Color Emoji', 'Android Emoji', 'EmojiSymbols', 'EmojiOne Mozilla', 'Twemoji Mozilla', 'Segoe UI Symbol', Arial, sans-serif;
          }

          .preview-details {
            .preview-name {
              font-size: 18px;
              font-weight: 600;
              margin-bottom: 4px;
              filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
            }

            .preview-description {
              font-size: 14px;
              opacity: 0.9;
              filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
            }
          }
        }

        .preview-badge {
          padding: 6px 12px;
          border-radius: 20px;
          font-size: 12px;
          font-weight: 600;
          text-transform: uppercase;
          letter-spacing: 0.5px;
          background: rgba(255, 255, 255, 0.2);
          color: inherit;
          backdrop-filter: blur(10px);
        }
      }
    }

    // Form Actions
    .form-actions {
      @include flex-between;
      padding-top: 32px;
      border-top: 1px solid #e9ecef;
      margin-top: 32px;
      flex-wrap: wrap;
      gap: 20px;

      @media (max-width: 768px) {
        flex-direction: column;
        gap: 16px;
      }

      .left-actions,
      .right-actions {
        @include flex-center;
        gap: 16px;
        justify-content: flex-start;

        @media (max-width: 768px) {
          justify-content: center;
          width: 100%;
        }
      }

      .btn-primary {
        @extend .btn-primary;
      }

      .btn-outline-secondary {
        @extend .btn-outline-secondary;
      }

      .btn-secondary {
        @extend .btn-secondary;
      }
    }
  }

  // Responsive Design
  @media (max-width: 1024px) {
    padding: 16px;

    .category-form {
      padding: 24px;

      .form-sections .form-section .form-row {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
      }
    }
  }

  @media (max-width: 768px) {
    .header-section {
      flex-direction: column;
      gap: 20px;
      text-align: center;
    }

    .category-form {
      padding: 20px;

      .form-sections .form-section {
        margin-bottom: 32px;
        padding-bottom: 24px;

        .form-row {
          grid-template-columns: 1fr;
          gap: 16px;
        }

        .color-options .color-grid,
        .icon-options .icon-grid {
          max-width: 100%;
        }
      }
    }
  }
}

// Custom tooltip animation
@keyframes tooltipFadeIn {
  0% { 
    opacity: 0; 
    transform: translateX(-50%) translateY(5px);
  }
  100% { 
    opacity: 1; 
    transform: translateX(-50%) translateY(0);
  }
}

// Custom scrollbar for textareas
textarea.form-control::-webkit-scrollbar {
  width: 8px;
}

textarea.form-control::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: $border-radius-sm;
}

textarea.form-control::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: $border-radius-sm;

  &:hover {
    background: #a8a8a8;
  }
}