<div class="dashboard-charts-container">
  <!-- Quick Stats Cards -->
  <div class="quick-stats" *ngIf="quickStats">
    <div class="stat-card">
      <div class="stat-icon">
        <i class="fas fa-wallet"></i>
      </div>
      <div class="stat-content">
        <div class="stat-label">Current Balance</div>
        <div class="stat-value" [class.positive]="quickStats.totalBalance > 0" [class.negative]="quickStats.totalBalance < 0">
          ${{ quickStats.totalBalance | number:'1.2-2' }}
        </div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">
        <i class="fas fa-arrow-up text-success"></i>
      </div>
      <div class="stat-content">
        <div class="stat-label">Monthly Income</div>
        <div class="stat-value">${{ quickStats.monthlyIncome | number:'1.2-2' }}</div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">
        <i class="fas fa-arrow-down text-danger"></i>
      </div>
      <div class="stat-content">
        <div class="stat-label">Monthly Expenses</div>
        <div class="stat-value">${{ quickStats.monthlyExpenses | number:'1.2-2' }}</div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">
        <i class="fas fa-percentage"></i>
      </div>
      <div class="stat-content">
        <div class="stat-label">Savings Rate</div>
        <div class="stat-value" [class.positive]="quickStats.savingsRate > 20" [class.warning]="quickStats.savingsRate > 10 && quickStats.savingsRate <= 20" [class.negative]="quickStats.savingsRate <= 10">
          {{ quickStats.savingsRate | number:'1.1-1' }}%
        </div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">
        <i class="fas fa-tag"></i>
      </div>
      <div class="stat-content">
        <div class="stat-label">Top Category</div>
        <div class="stat-value">{{ quickStats.topCategory }}</div>
        <div class="stat-subvalue">${{ quickStats.topCategoryAmount | number:'1.2-2' }}</div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">
        <i class="fas fa-clock"></i>
      </div>
      <div class="stat-content">
        <div class="stat-label">Last Updated</div>
        <div class="stat-value">{{ lastUpdated | date:'short' }}</div>
      </div>
    </div>
  </div>

  <!-- Charts Grid -->
  <div class="charts-grid">
    <!-- Account Balance Chart -->
    <div class="chart-card" *ngIf="balanceChartData">
      <div class="chart-header">
        <h3>Account Balance</h3>
        <p class="chart-description">Balance trend over time</p>
        <div class="chart-actions">
          <button class="btn btn-sm btn-outline-secondary" (click)="exportChart('balance')">
            <i class="fas fa-download"></i>
          </button>
        </div>
      </div>
      <div class="chart-container">
        <canvas #balanceChart></canvas>
      </div>
    </div>

    <!-- Income vs Expenses Chart -->
    <div class="chart-card" *ngIf="incomeExpenseChartData">
      <div class="chart-header">
        <h3>Income vs Expenses</h3>
        <p class="chart-description">Monthly comparison</p>
        <div class="chart-actions">
          <button class="btn btn-sm btn-outline-secondary" (click)="exportChart('incomeExpense')">
            <i class="fas fa-download"></i>
          </button>
        </div>
      </div>
      <div class="chart-container">
        <canvas #incomeExpenseChart></canvas>
      </div>
    </div>

    <!-- Category Spending Chart -->
    <div class="chart-card" *ngIf="categoryChartData">
      <div class="chart-header">
        <h3>Spending by Category</h3>
        <p class="chart-description">Top spending categories</p>
        <div class="chart-actions">
          <button class="btn btn-sm btn-outline-secondary" (click)="exportChart('category')">
            <i class="fas fa-download"></i>
          </button>
        </div>
      </div>
      <div class="chart-container">
        <canvas #categoryChart></canvas>
      </div>
    </div>

    <!-- Net Income Trend Chart -->
    <div class="chart-card" *ngIf="trendChartData">
      <div class="chart-header">
        <h3>Net Income Trend</h3>
        <p class="chart-description">Monthly net income flow</p>
        <div class="chart-actions">
          <button class="btn btn-sm btn-outline-secondary" (click)="exportChart('trend')">
            <i class="fas fa-download"></i>
          </button>
        </div>
      </div>
      <div class="chart-container">
        <canvas #trendChart></canvas>
      </div>
    </div>

    <!-- Real-time Balance Chart -->
    <div class="chart-card realtime" *ngIf="realtimeData.length > 0">
      <div class="chart-header">
        <h3>Real-time Balance</h3>
        <p class="chart-description">Live balance tracking</p>
        <div class="chart-actions">
          <button class="btn btn-sm" [class.btn-success]="isRealTimeMode" [class.btn-outline-success]="!isRealTimeMode" (click)="toggleRealTimeMode()">
            <i class="fas" [class.fa-play]="!isRealTimeMode" [class.fa-pause]="isRealTimeMode"></i>
            {{ isRealTimeMode ? 'Live' : 'Start' }}
          </button>
          <button class="btn btn-sm btn-outline-secondary" (click)="exportChart('realtime')">
            <i class="fas fa-download"></i>
          </button>
        </div>
      </div>
      <div class="chart-container">
        <canvas #realtimeChart></canvas>
      </div>
      <div class="realtime-indicator" *ngIf="isRealTimeMode">
        <div class="pulse-dot"></div>
        <span>Live updates enabled</span>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading-state" *ngIf="isLoading">
    <div class="loading-content">
      <div class="spinner"></div>
      <p>Updating dashboard charts...</p>
    </div>
  </div>

  <!-- No Data State -->
  <div class="no-data-state" *ngIf="!isLoading && !balanceChartData && !incomeExpenseChartData && !categoryChartData">
    <div class="no-data-content">
      <i class="fas fa-chart-line"></i>
      <h3>No Dashboard Data Available</h3>
      <p>Start adding transactions to see your financial dashboard</p>
      <button class="btn btn-primary" routerLink="/financial/transactions/new">
        <i class="fas fa-plus"></i>
        Add Transaction
      </button>
    </div>
  </div>
</div>
